(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{216:function(v,_,e){"use strict";e.r(_);var t=e(2),i=Object(t.a)({},function(){var v=this,_=v.$createElement,e=v._self._c||_;return e("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[e("p",[v._v("之前小程序测试出来一个bug。在管理车型页面删除一辆车型后，在点击第一辆车型返回到车型档案页时，最上面的车型卡片消失了。")]),v._v(" "),e("p",[v._v("找来找去没找到问题根源，只知道原因出现在 "),e("code",[v._v("swiper")]),v._v(" 组件上。")]),v._v(" "),e("p",[v._v("在返回的时候，明明设置了 swiper 组件的 "),e("code",[v._v("current")]),v._v(" 属性为 0，可是查看元素发现显示的是 "),e("code",[v._v("-1")]),v._v("。")]),v._v(" "),e("p",[v._v("到处找代码逻辑，修修改改，最后测试似乎没复现了，可是为什么好的？还是不知道。")]),v._v(" "),e("p",[v._v("本来就这样的话，估计也就放着不动了，可是在今天要上线的时候，居然又出现了这个情况！")]),v._v(" "),e("p",[v._v("好吧，只能继续找问题了。")]),v._v(" "),e("p",[v._v("经过一段艰辛的排查，最后发现，问题可能出现在 "),e("code",[v._v("swiper-item")]),v._v(" 组件的一个属性上："),e("code",[v._v("item-id")])]),v._v(" "),e("p",[v._v("微信文档对它的描述是：")]),v._v(" "),e("blockquote",[e("p",[v._v("swiper-item")]),v._v(" "),e("p",[v._v("仅可放置在 "),e("code",[v._v("<swiper>")]),v._v(" 组件中，宽高自动设置为100%。")]),v._v(" "),e("table",[e("thead",[e("tr",[e("th",[v._v("属性")]),v._v(" "),e("th",[v._v("类型")]),v._v(" "),e("th",[v._v("默认值")]),v._v(" "),e("th",[v._v("说明")]),v._v(" "),e("th",[v._v("最低版本")])])]),v._v(" "),e("tbody",[e("tr",[e("td",[v._v("item-id")]),v._v(" "),e("td",[v._v("String")]),v._v(" "),e("td",[v._v('""')]),v._v(" "),e("td",[v._v("该 swiper-item 的标识符")]),v._v(" "),e("td",[v._v("1.9.0")])])])])]),v._v(" "),e("p",[v._v("而我的项目里的 "),e("code",[v._v("swiper-item")]),v._v(" 就添加了该属性，值为车型id。")]),v._v(" "),e("p",[v._v("而问题也正出现在这里。")]),v._v(" "),e("p",[v._v("当我在车型管理页面删除了车型之后，返回前一页时，虽然重新调用接口获取了新的车型列表，\n新列表与旧列表不是同一个对象，可内部数据id，同一辆车还是一样的，这就导致了"),e("code",[v._v("swiper-item")]),v._v("的标识其实并没有改变，然后其中被标识的"),e("code",[v._v("swiper-item")]),v._v("找不到了。")]),v._v(" "),e("p",[v._v("大概就是这样导致的 "),e("code",[v._v('current="-1"')]),v._v(" 这样的问题。")]),v._v(" "),e("p",[v._v("之后删除了 "),e("code",[v._v("item-id")]),v._v(" 属性后，问题解决了。")])])},[],!1,null,null,null);_.default=i.exports}}]);